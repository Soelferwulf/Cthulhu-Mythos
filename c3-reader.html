<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H. P. Lovecraft - Fulltext reader</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="./styles.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>

</head>

<body class="reader">
    <noscript>
        <h1 style="color: red" ;>JavaScript is deactivated!</h1>
    </noscript>

    <nav class="navbar navbar-expand-sm justify-content-between fixed-top reader-navbar" id="uncollapsed">
        <a href="./index.html" class="navbar-brand" onclick="fxSanityCounter()"><img class="navbar-logo"
                src="../Images/Cthulhu Icon - Wirestock.png" alt="Icon - Little Cthulhu" style="width:2rem;"></a>
        <ul class="navbar-nav justify-content-end">
            <li class="nav-item dropdown">
                <a href="./b1-the_world.html" class="nav-link dropdown-toggle" id="mythos-main"
                    onclick="fxSanityCounter()">CTHULHU MYTHOS</a>
                <div class="dropdown-menu">
                    <a href="./b1-the_world.html" class="dropdown-item" onclick="fxSanityCounter()">The World</a>
                    <a href="./b2-board_games.html" class="dropdown-item" onclick="fxSanityCounter()">Board Games</a>
                    <a href="./b3-computer_games.html" class="dropdown-item" onclick="fxSanityCounter()">Computer
                        Games</a>
                    <a href="./b4-call_of_cthulhu_rpg.html" class="dropdown-item" onclick="fxSanityCounter()">Call of
                        Cthulhu RPG</a>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a href="./c1-lovecraft.html" class="nav-link dropdown-toggle" id="lovecraft-main"
                    onclick="fxSanityCounter()">H. P.
                    LOVECRAFT</a>
                <div class="dropdown-menu">
                    <a href="./c1-lovecraft.html" class="dropdown-item" onclick="fxSanityCounter()">The Author</a>
                    <a href="./c2-bibliography.html" class="dropdown-item" onclick="fxSanityCounter()">Bibliography</a>
                    <a href="./c3-reader.html" class="dropdown-item" onclick="fxSanityCounter()">Fulltext reader</a>
                    <a href="https://www.hplhs.org/" class="dropdown-item" onclick="fxSanityCounter()">H. P.
                        Lovecraft<br>Historical Society</a>
                </div>
            </li>
            <li class="nav-item">
                <a href="./d-contact.html" class="nav-link" id="contact" onclick="fxSanityCounter()">CONTACT</a>
            </li>
        </ul>
    </nav>

    <nav class="navbar navbar-expand-md justify-content-between fixed-top reader-navbar" id="collapsed">
        <a href="./index.html" class="navbar-brand" onclick="fxSanityCounter()"><img class="navbar-logo"
                src="../Images/Cthulhu Icon - Wirestock.png" alt="Icon - Funny Cthulhu" style="width:2rem;"></a>
        <!-- hamburger menu -->
        <button class="navbar-toggler" id="burger-button" type="button" data-toggle="collapse" data-target="#burger">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="burger">
            <ul class="navbar-nav justify-content-end">
                <li class="nav-item collapsed-dropdown">
                    <a class="nav-link dropdown-toggle" id="mythos-main-collapse" data-toggle="dropdown"
                        onclick="fxSanityCounter()">CTHULHU MYTHOS</a>
                    <div class="dropdown-menu">
                        <a href="./b1-the_world.html" class="dropdown-item" onclick="fxSanityCounter()">The World</a>
                        <a href="./b2-board_games.html" class="dropdown-item" onclick="fxSanityCounter()">Board
                            Games</a>
                        <a href="./b3-computer_games.html" class="dropdown-item" onclick="fxSanityCounter()">Computer
                            Games</a>
                        <a href="./b4-call_of_cthulhu_rpg.html" class="dropdown-item" onclick="fxSanityCounter()">Call
                            of
                            Cthulhu RPG</a>
                    </div>
                </li>
                <li class="nav-item collapsed-dropdown">
                    <a class="nav-link dropdown-toggle" id="lovecraft-main-collapse" data-toggle="dropdown"
                        onclick="fxSanityCounter()">H. P. LOVECRAFT</a>
                    <div class="dropdown-menu">
                        <a href="./c1-lovecraft.html" class="dropdown-item" onclick="fxSanityCounter()">The Author</a>
                        <a href="./c2-bibliography.html" class="dropdown-item"
                            onclick="fxSanityCounter()">Bibliography</a>
                        <a href="./c3-reader.html" class="dropdown-item" onclick="fxSanityCounter()">Fulltext reader</a>
                        <a href="https://www.hplhs.org/" class="dropdown-item" onclick="fxSanityCounter()">H. P.
                            Lovecraft<br>Historical Society</a>
                    </div>
                </li>
                <li class="nav-item collapsed-dropdown">
                    <a href="./d-contact.html" class="nav-link" id="contact-collapse"
                        onclick="fxSanityCounter()">CONTACT</a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="container reader-container">
        <div class="row">
            <div class="col-sm-12">
                <h3 class="container-title" id="reader-title">Fulltext Reader - <span id="title-output">Title</span></h3>
                <button class="biblio-fulltext-link" id="biblio-button"><a href="./c2-bibliography.html">Back to Bibliography</a></button>
                <button class="biblio-fulltext-link" id="larger-font" onclick="largerFont()">Larger font</button>
                <button class="biblio-fulltext-link" id="invert-colors" onclick="invertColors()">Invert Colors</button>
                    <div class="card-body" id="reader">
                    </div>
                    
                <div class="card">
                </div>
                
            </div>
        </div>
        
    </div>

    <script>

        var fulltext = [];
        var titles = [];
        var num = 0;


        // reading cookie from bibliography
        function cookieReader() {
            let c = document.cookie;
            num = c.substring(4);
        }
        cookieReader();


        // loading xml data
        function loadXMLDoc() {
            var xmlhttp = new XMLHttpRequest();
            xmlhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    reader(this);
                }
            };
            xmlhttp.open("GET", "./bibliography.xml", true);
            xmlhttp.send();
        }

        // loading fulltext from XML
        function reader(xml) {
            var i;
            var xmlDoc = xml.responseXML;
            var fulltextStorage;
            var titlesStorage;
            // accessing the "book" element in XML 
            var x = xmlDoc.getElementsByTagName("book");
            for (i = 0; i < x.length; i++) {
                titlesStorage = x[i].getElementsByTagName("title")[0].childNodes[0].nodeValue;
                titles.push(titlesStorage);
                fulltextStorage = x[i].getElementsByTagName("read")[0].childNodes[0].nodeValue;
                fulltext.push(fulltextStorage);
            }
            document.getElementById("title-output").innerHTML = titles[num];
            document.getElementById("reader").innerHTML = fulltext[num];
        }
        loadXMLDoc();

        // making the font of the reader bigger
        let fontSize = false;
        function largerFont() {
            if (fontSize == false) {
                document.getElementById("reader").style.fontSize = "1.5rem";
                document.getElementById("larger-font").innerHTML = "Smaller font";
                fontSize = true;
            } else {
                document.getElementById("reader").style.fontSize = "1rem";
                document.getElementById("larger-font").innerHTML = "Larger font";
                fontSize = false;
            }
        };
        let color = false;
        function invertColors() {
            if (color == false) {
                document.getElementById("reader").style.backgroundColor = "rgba(255, 255, 255, 0.9)";
                document.getElementById("reader").style.color = "rgba(0, 0, 0, 0.8)";
                color = true;
            } else {
                document.getElementById("reader").style.backgroundColor = "var(--reader-dark)";
                document.getElementById("reader").style.color = "var(--text)";
                color = false;
            }
        };
    </script>

    <div class="progress fixed-bottom">
        <div class="progress-bar" style="width:0%"></div>
    </div>
</body>

</html>